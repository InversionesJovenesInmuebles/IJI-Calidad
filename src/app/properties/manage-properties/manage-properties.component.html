<div class="flex justify-between items-center mb-4">
  <h1 class="text-2xl font-bold">Gestionar Propiedades</h1>
  <button class="px-4 py-2 bg-blue-900 text-white rounded-md transition-colors hover:bg-white hover:text-blue-900 border border-blue-900" (click)="openModal()">Agregar Propiedad</button>
</div>

<div class="flex flex-wrap justify-center gap-8">
  <div *ngFor="let propiedad of properties" class="w-80 p-4 bg-white rounded-lg border border-blue-900 flex flex-col gap-4">
    <div class="flex flex-col gap-4">
      <img [src]="propiedad.fotos.length ? propiedad.fotos[0].nombreFoto : 'assets/img/default.jpg'" alt="Propiedad" class="w-full h-[200px] object-cover rounded-md">
      <div class="bg-orange-500 text-white text-lg font-medium py-1 px-2 rounded-md">
        <p>{{ propiedad.tipoPropiedad }}</p>
      </div>
      <div class="flex justify-around text-lg">
        <div class="text-gray-700">
          <p>Inicial: ${{ propiedad.costoInicial }}</p>
        </div>
        <div class="text-gray-700">
          <p>Total: ${{ propiedad.costoTotal }}</p>
        </div>
      </div>
      <div class="flex gap-5 justify-center items-center text-lg">
        <div class="flex items-center gap-2">
          <img src="icons/habitacion.png" alt="Habitaciones" class="w-6 h-6">
          <p>{{ propiedad.cantDormitorios }}</p>
        </div>
        <div class="flex items-center gap-2">
          <img src="icons/bano.png" alt="Baños" class="w-6 h-6">
          <p>{{ propiedad.cantBanos }}</p>
        </div>
        <div class="flex items-center gap-2">
          <img src="icons/area.png" alt="Area" class="w-6 h-6">
          <p>{{ propiedad.areaTerreno }} m<sup>2</sup></p>
        </div>
      </div>
      <div class="text-gray-600 text-sm">
        <p>{{ propiedad.direccion }} {{ propiedad.distrito }}, {{ propiedad.provincia }}, {{ propiedad.region }}, {{ propiedad.pais }}</p>
      </div>
    </div>
    <div class="flex mt-4">
      <button class="w-1/2 px-4 py-2 bg-white text-blue-900 border border-blue-900 rounded-l-md transition-colors hover:bg-blue-900 hover:text-white hover:border-blue-900" (click)="modificarPropiedad(propiedad.idPropiedad)">Modificar</button>
      <button class="w-1/2 px-4 py-2 bg-white text-blue-900 border border-blue-900 rounded-r-md transition-colors hover:bg-orange-500 hover:text-white hover:border-orange-500" (click)="openDeleteModal(propiedad)">Eliminar</button>
    </div>
  </div>
</div>


<!-- Modal de Agregar Propiedad -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center" [ngClass]="{'block': isModalOpen, 'hidden': !isModalOpen}">
  <div class="bg-white rounded-lg p-6 relative max-w-lg w-full">
    <button class="absolute top-2 right-2 text-gray-400 hover:text-black" (click)="closeModal()">&times;</button>
    <h2 class="text-2xl font-bold mb-4">Agregar Propiedad</h2>
    <p class="mb-4">Seleccione el tipo de propiedad que desea agregar:</p>
    <div class="flex justify-around">
      <button (click)="addHouse()" class="flex flex-col items-center bg-blue-900 text-white rounded-lg px-4 py-4 hover:bg-orange-500 transition-colors">
        <img src="icons/casa.png" alt="Casa" class="w-10 h-10 mb-2">
        <span>Agregar Casa</span>
      </button>
      <button (click)="addApartment()" class="flex flex-col items-center bg-blue-900 text-white rounded-lg px-4 py-4 hover:bg-orange-500 transition-colors">
        <img src="icons/departamento.png" alt="Departamento" class="w-10 h-10 mb-2">
        <span>Agregar Departamento</span>
      </button>
    </div>
  </div>
</div>

<!-- Modal de Confirmación -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center" [ngClass]="{'block': isDeleteModalOpen, 'hidden': !isDeleteModalOpen}">
  <div class="bg-white rounded-lg p-6 relative max-w-lg w-full">
    <button class="absolute top-2 right-2 text-gray-400 hover:text-black" (click)="closeDeleteModal()">&times;</button>
    <h2 class="text-2xl font-bold mb-4">Eliminar Propiedad</h2>
    <p class="mb-4">¿Estás seguro que deseas eliminar esta propiedad?</p>
    <div class="flex justify-around">
      <button class="px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-orange-500 transition-colors" (click)="confirmDelete()">Sí</button>
      <button class="px-4 py-2 bg-gray-400 text-white rounded-lg hover:bg-gray-600 transition-colors" (click)="closeDeleteModal()">No</button>
    </div>
  </div>
</div>

<div *ngIf="deleteSuccessMessage" class="fixed top-0 left-0 w-full p-4 bg-green-500 text-white text-center">
  La propiedad ha sido eliminada exitosamente.
</div>

<div *ngIf="deleteSuccessMessage" class="fixed top-0 left-0 w-full p-4 bg-green-500 text-white text-center">
  La propiedad ha sido eliminada exitosamente.
</div>
